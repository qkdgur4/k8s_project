// frontend/views/list.pug (ìµœì¢… ì™„ì„±ë³¸ - URL ì¸ì½”ë”© ì¶”ê°€)

if reviews && reviews.length > 0
  h3.my-4.text-primary ì‘ì„±ëœ ê¸€ ëª©ë¡
  .row
    for review in reviews
      .col-12.mb-4
        .card.shadow-sm.border-0.rounded
          .card-body.p-4
            .d-flex.justify-content-between.align-items-center.mb-2
              div
                h5.card-title.font-weight-bold.mb-0 #{review.store}
                small.text-muted (#{review.name})
              div.text-right
                - const rating = parseInt(review.taste) || 0
                span.h5.text-warning.mb-0 #{'â˜…'.repeat(rating)}#{'â˜†'.repeat(5 - rating)}
                br
                small.text-muted ë§› í‰ì 

            h6.card-subtitle.mb-3.text-muted #{review.category} / #{review.menu}

            p.card-text.mb-3
              strong íƒœê·¸:
              if Array.isArray(review.tags) && review.tags.length > 0
                each tag in review.tags
                  a.badge.badge-info.mr-1.mb-1(href=`/?tag=${tag}`)= tag
              else
                span.text-muted.ml-2 -

            p.card-text.mb-3
              strong ì¶”ì²œ:
              if review.recommend === 'yes'
                span.badge.badge-success.ml-2 ì¶”ì²œí•´ìš” ğŸ‘
              else
                span.badge.badge-secondary.ml-2 ì•„ì‰¬ì›Œìš” ğŸ‘

            .d-flex.justify-content-between.align-items-end.border-top.pt-3.mt-3
              small.text-muted.review-memo #{review.memo || 'ë©”ëª¨ ì—†ìŒ'}
              small.text-muted.review-date #{new Date(review.createdAt).toLocaleDateString()}
            
            .text-right.mt-2
              //- ğŸŸ¢ğŸŸ¢ğŸŸ¢ ë°”ë¡œ ì—¬ê¸°ê°€ ìˆ˜ì •ëœ ë¶€ë¶„ì…ë‹ˆë‹¤! ğŸŸ¢ğŸŸ¢ğŸŸ¢
              //- 1. encodeURIComponent() í•¨ìˆ˜ë¡œ review.storeë¥¼ ê°ìŒŒìŠµë‹ˆë‹¤.
              //-    (review.storeê°€ ë¹„ì–´ìˆì„ ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ || '' ì•ˆì „ì¥ì¹˜ ì¶”ê°€)
              a.btn.btn-sm.btn-outline-info.mr-2(
                href=`https://search.naver.com/search.naver?query=${encodeURIComponent(review.store || '')}`,
                target='_blank',
                rel='noopener'
              ) ğŸ—ºï¸ ìì„¸íˆ ë³´ê¸°
              
              //- 2. ê¸°ì¡´ ìˆ˜ì •/ì‚­ì œ ë²„íŠ¼
              a.btn.btn-sm.btn-outline-secondary(
                href=`/reviews/${review._id}/edit`,
                target='_blank',
                rel='noopener'
              ) âœ ìˆ˜ì •í•˜ê¸°
              button.btn.btn-sm.btn-danger.ml-2(
                type='button',
                onclick=`deleteReview('${review._id}')`
              ) ğŸ—‘ ì‚­ì œ
else
  .alert.alert-info(role='alert')
    | ì•„ì§ ì‘ì„±ëœ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤. ì²« ë²ˆì§¸ ë¦¬ë·°ë¥¼ ë‚¨ê²¨ì£¼ì„¸ìš”!