doctype html
html
  head
    meta(charset='utf-8')
    title í•œì…ë¡œê·¸
    meta(name='viewport', content='width=device-width, initial-scale=1')
    link(rel='stylesheet', href='https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css')
    link(rel='stylesheet', href='/css/style.css')
  body
    .header.bg-light.mb-0
      .container
        h1: a(href='/', class='text-dark text-decoration-none') í•œì…ë¡œê·¸ğŸ½
        p.text-muted.mb-0 ì‘ì€ í•œì…ì—ë„ ì´ì•¼ê¸°ê°€ ë‹´ê²¨ìš” ğŸ²
    .container.mb-5
      h3.mb-4.text-primary ê¸€ ì‘ì„±í•˜ê¸°
      button.btn.btn-outline-primary.mb-3#show-form-btn ìƒˆ ë¦¬ë·° ì‘ì„±í•˜ê¸°
      #review-form-wrapper(style="display: none;")
        form#new-review-form
          .form-group
            label(for='name') ì´ë¦„
            input#name.form-control(type='text' name='name' placeholder='ìµëª…ë„ ê°€ëŠ¥í•´ìš”')
          .form-group
            label(for='store') ê°€ê²Œëª…
            input#store.form-control(type='text' name='store' placeholder='ë°©ë¬¸í•œ ìŒì‹ì  ì´ë¦„ì„ ì ì–´ì£¼ì„¸ìš”')
          .form-group
            label(for='category') ìŒì‹ ë¶„ë¥˜
            select#category.form-control(name='category')
              option(value='í•œì‹') í•œì‹
              option(value='ì¤‘ì‹') ì¤‘ì‹
              option(value='ì¼ì‹') ì¼ì‹
              option(value='ì–‘ì‹') ì–‘ì‹
              option(value='ë¶„ì‹') ë¶„ì‹
              option(value='ê¸°íƒ€') ê¸°íƒ€
          .form-group
            label(for='menu') ë¨¹ì€ ìŒì‹
            input#menu.form-control(type='text' name='menu' placeholder='ì˜ˆ: ê¹€ì¹˜ì°Œê°œ, í¬ë¦¼íŒŒìŠ¤íƒ€ ë“±')
          .form-group
            label(for='taste') ë§› í‰ì 
            select#taste.form-control(name='taste')
              option(value='5') â˜…â˜…â˜…â˜…â˜…
              option(value='4') â˜…â˜…â˜…â˜…â˜†
              option(value='3') â˜…â˜…â˜…â˜†â˜†
              option(value='2') â˜…â˜…â˜†â˜†â˜†
              option(value='1') â˜…â˜†â˜†â˜†â˜†
          .form-group
            label(for='mood') ë¶„ìœ„ê¸°
            input#mood.form-control(type='text' name='mood' placeholder='ì¡°ìš©í•¨, í™œê¸°ì°¸, ê°€ì¡±ì , íŠ¸ë Œë”” ë“±')
          .form-group
            label(for='memo') ì¶”ê°€ ë©”ëª¨
            textarea#memo.form-control(name='memo' rows='4' placeholder='ìœ„ìƒ ìƒíƒœ, ìœ„ì¹˜, ê±¸ë¦¬ëŠ” ì‹œê°„ ë“±ì„ ì ì–´ì£¼ì„¸ìš”')
          .form-group
            label(for='recommend') ì¶”ì²œ ì—¬ë¶€
            select#recommend.form-control(name='recommend')
              option(value='yes') ì¶”ì²œí•´ìš” ğŸ‘
              option(value='no') ì•„ì‰¬ì›Œìš” ğŸ‘
          button.btn.btn-success.btn-block(type='submit') ì‘ì„± ì™„ë£Œ
          button.btn.btn-secondary.btn-block(type='button')#hide-form-btn ì·¨ì†Œ
    .container-fluid.posts.mt-5
      .mb-4.text-center
        - const categories = ['ì „ì²´', 'í•œì‹', 'ì¤‘ì‹', 'ì¼ì‹', 'ì–‘ì‹', 'ë¶„ì‹', 'ê¸°íƒ€']
        each cat in categories
          a(href=`/?category=${cat}`, class=`btn ${currentCategory === cat ? 'btn-primary' : 'btn-outline-secondary'} mr-2 mb-2`)= cat
include list.pug

  //- ğŸŸ¢ğŸŸ¢ğŸŸ¢ 1. ì´ ìŠ¤í¬ë¦½íŠ¸ ë¸”ë¡ì„ /main.js ìœ„ì— ì¶”ê°€í•˜ì„¸ìš”. ğŸŸ¢ğŸŸ¢ğŸŸ¢
  script.
    document.addEventListener('DOMContentLoaded', () => {
      const showButton = document.getElementById('show-form-btn');
      const hideButton = document.getElementById('hide-form-btn');
      const formWrapper = document.getElementById('review-form-wrapper');

      // 1. URLì— ë”°ë¼ í¼ ìƒíƒœë¥¼ ê²°ì •í•˜ëŠ” í•¨ìˆ˜
      function updateFormVisibility() {
        if (window.location.pathname === '/reviews/new') {
          formWrapper.style.display = 'block';
          showButton.style.display = 'none';
        } else {
          formWrapper.style.display = 'none';
          showButton.style.display = 'block';
        }
      }

      // 2. "ìƒˆ ë¦¬ë·° ì‘ì„±" ë²„íŠ¼ í´ë¦­ ì‹œ
      showButton.addEventListener('click', () => {
        history.pushState(null, '', '/reviews/new'); // URL ë³€ê²½
        updateFormVisibility(); // í¼ ë³´ì—¬ì£¼ê¸°
      });

      // 3. "ì·¨ì†Œ" ë²„íŠ¼ í´ë¦­ ì‹œ
      hideButton.addEventListener('click', () => {
        history.pushState(null, '', '/'); // URL ë˜ëŒë¦¬ê¸°
        updateFormVisibility(); // í¼ ìˆ¨ê¸°ê¸°
      });

      // 4. ë¸Œë¼ìš°ì € ë’¤ë¡œê°€ê¸°/ì•ìœ¼ë¡œê°€ê¸° ë²„íŠ¼ í´ë¦­ ì‹œ
      window.addEventListener('popstate', () => {
        updateFormVisibility();
      });

      // 5. í˜ì´ì§€ê°€ ì²˜ìŒ ë¡œë“œë  ë•Œ
      updateFormVisibility();
    });

  //- 2. main.jsëŠ” ì´ ìŠ¤í¬ë¦½íŠ¸ ë¸”ë¡ 'ì•„ë˜'ì— ìˆì–´ì•¼ í•©ë‹ˆë‹¤.
  script(src='/main.js')